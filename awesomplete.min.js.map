{"version":3,"sources":["awesomplete.js"],"names":["Suggestion","data","o","Array","isArray","label","value","this","configure","instance","properties","i","initial","attrValue","input","getAttribute","toLowerCase","parseInt","Function","$","expr","con","document","querySelector","$$","slice","call","querySelectorAll","init","forEach","_","me","isOpened","filterDelayed","setAttribute","minChars","maxItems","autoFirst","filterDelay","DATA","filter","FILTER_CONTAINS","sort","SORT_BYLENGTH","item","ITEM","replace","REPLACE","index","container","create","className","around","ul","hidden","inside","status","role","aria-live","aria-relevant","bind","evaluate","blur","close","reason","keydown","evt","c","keyCode","opened","selected","preventDefault","select","shiftKey","open","form","submit","mousedown","li","target","test","nodeName","parentNode","button","hasAttribute","list","removeAttribute","all","push","prototype","_list","indexOf","split","children","items","apply","el","disabled","text","textContent","trim","activeElement","fire","goto","next","count","length","previous","pos","lis","scrollTop","offsetTop","clientHeight","suggestions","origin","siblingIndex","suggestion","allowed","time","Date","getTime","lastFilterTime","setTimeout","innerHTML","map","appendChild","RegExp","regExpEscape","FILTER_STARTSWITH","a","b","html","aria-selected","Object","defineProperty","String","get","toString","valueOf","tag","element","createElement","val","ref","insertBefore","event","callback","addEventListener","type","createEvent","initEvent","j","dispatchEvent","s","previousElementSibling","Document","readyState","self","Awesomplete","module","exports"],"mappings":"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","file":"awesomplete.min.js","sourcesContent":["/**\r\n * Simple, lightweight, usable local autocomplete library for modern browsers\r\n * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P\r\n * @author Lea Verou http://leaverou.github.io/awesomplete\r\n * MIT license\r\n */\r\n\r\n(function () {\r\n\r\nvar _ = function (input, o) {\r\n\tvar me = this;\r\n\r\n\t// Setup\r\n\r\n\tthis.isOpened = false;\r\n\tthis.filterDelayed = false;\r\n\r\n\tthis.input = $(input);\r\n\tthis.input.setAttribute(\"autocomplete\", \"off\");\r\n\tthis.input.setAttribute(\"aria-autocomplete\", \"list\");\r\n\r\n\to = o || {};\r\n\r\n\tconfigure(this, {\r\n\t\tminChars: 2,\r\n\t\tmaxItems: 10,\r\n\t\tautoFirst: false,\r\n\t\tfilterDelay: 500,\r\n\t\tdata: _.DATA,\r\n\t\tfilter: _.FILTER_CONTAINS,\r\n\t\tsort: _.SORT_BYLENGTH,\r\n\t\titem: _.ITEM,\r\n\t\treplace: _.REPLACE\r\n\t}, o);\r\n\r\n\tthis.index = -1;\r\n\r\n\t// Create necessary elements\r\n\r\n\tthis.container = $.create(\"div\", {\r\n\t\tclassName: \"awesomplete\",\r\n\t\taround: input\r\n\t});\r\n\r\n\tthis.ul = $.create(\"ul\", {\r\n\t\thidden: \"hidden\",\r\n\t\tinside: this.container\r\n\t});\r\n\r\n\tthis.status = $.create(\"span\", {\r\n\t\tclassName: \"visually-hidden\",\r\n\t\trole: \"status\",\r\n\t\t\"aria-live\": \"assertive\",\r\n\t\t\"aria-relevant\": \"additions\",\r\n\t\tinside: this.container\r\n\t});\r\n\r\n\t// Bind events\r\n\r\n\t$.bind(this.input, {\r\n\t\t\"input\": this.evaluate.bind(this),\r\n\t\t\"blur\": this.close.bind(this, { reason: \"blur\" }),\r\n\t\t\"keydown\": function(evt) {\r\n\t\t\tvar c = evt.keyCode;\r\n\r\n\t\t\t// Act on keydown for the following keys:\r\n\t\t\t// Enter / Tab / Esc (only if ul opened)\r\n\t\t\t// Up / Down (also opens ul if closed)\r\n\t\t\tif (me.opened) {\r\n\t\t\t\tif (c === 13 && me.selected) { // Enter\r\n\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t\tme.select();\r\n\t\t\t\t}\r\n\t\t\t\telse if (c === 27) { // Esc\r\n\t\t\t\t\tme.close({ reason: \"esc\" });\r\n\t\t\t\t}\r\n\t\t\t\telse if (c === 9) { // Tab / Shift-Tab\r\n\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t\tme[evt.shiftKey ? \"previous\" : \"next\"]();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (c === 38 || c === 40) { // Down/Up arrow\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tif (!me.opened) {\r\n\t\t\t\t\tme.open();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tme[c === 38 ? \"previous\" : \"next\"]();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t});\r\n\r\n\t$.bind(this.input.form, {\"submit\": this.close.bind(this, { reason: \"submit\" })});\r\n\r\n\t$.bind(this.ul, {\"mousedown\": function(evt) {\r\n\t\tvar li = evt.target;\r\n\r\n\t\tif (li !== this) {\r\n\r\n\t\t\twhile (li && !/li/i.test(li.nodeName)) {\r\n\t\t\t\tli = li.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tif (li && evt.button === 0) {  // Only select on left click\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tme.select(li, evt.target);\r\n\t\t\t}\r\n\t\t}\r\n\t}});\r\n\r\n\tif (this.input.hasAttribute(\"list\")) {\r\n\t\tthis.list = \"#\" + this.input.getAttribute(\"list\");\r\n\t\tthis.input.removeAttribute(\"list\");\r\n\t}\r\n\telse {\r\n\t\tthis.list = this.input.getAttribute(\"data-list\") || o.list || [];\r\n\t}\r\n\r\n\t_.all.push(this);\r\n};\r\n\r\n_.prototype = {\r\n\tset list(list) {\r\n\t\tif (Array.isArray(list)) {\r\n\t\t\tthis._list = list;\r\n\t\t}\r\n\t\telse if (typeof list === \"string\" && list.indexOf(\",\") > -1) {\r\n\t\t\t\tthis._list = list.split(/\\s*,\\s*/);\r\n\t\t}\r\n\t\telse { // Element or CSS selector\r\n\t\t\tlist = $(list);\r\n\r\n\t\t\tif (list && list.children) {\r\n\t\t\t\tvar items = [];\r\n\t\t\t\tslice.apply(list.children).forEach(function (el) {\r\n\t\t\t\t\tif (!el.disabled) {\r\n\t\t\t\t\t\tvar text = el.textContent.trim();\r\n\t\t\t\t\t\tvar value = el.value || text;\r\n\t\t\t\t\t\tvar label = el.label || text;\r\n\t\t\t\t\t\tif (value !== \"\") {\r\n\t\t\t\t\t\t\titems.push({ label: label, value: value });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis._list = items;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (document.activeElement === this.input) {\r\n\t\t\tthis.evaluate();\r\n\t\t}\r\n\t},\r\n\r\n\tget selected() {\r\n\t\treturn this.index > -1;\r\n\t},\r\n\r\n\tget opened() {\r\n\t\treturn this.isOpened;\r\n\t},\r\n\r\n\tclose: function (o) {\r\n\t\tif (!this.opened) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.ul.setAttribute(\"hidden\", \"\");\r\n\t\tthis.isOpened = false;\r\n\r\n\t\t$.fire(this.input, \"awesomplete-close\", o || {});\r\n\t},\r\n\r\n\topen: function () {\r\n\t\tthis.ul.removeAttribute(\"hidden\");\r\n\t\tthis.isOpened = true;\r\n\r\n\t\tif (this.autoFirst && this.index === -1) {\r\n\t\t\tthis.goto(0);\r\n\t\t}\r\n\r\n\t\t$.fire(this.input, \"awesomplete-open\");\r\n\t},\r\n\r\n\tnext: function () {\r\n\t\tvar count = this.ul.children.length;\r\n\t\tthis.goto(this.index < count - 1 ? this.index + 1 : (count ? 0 : -1) );\r\n\t},\r\n\r\n\tprevious: function () {\r\n\t\tvar count = this.ul.children.length;\r\n\t\tvar pos = this.index - 1;\r\n\r\n\t\tthis.goto(this.selected && pos !== -1 ? pos : count - 1);\r\n\t},\r\n\r\n\t// Should not be used, highlights specific item without any checks!\r\n\tgoto: function (i) {\r\n\t\tvar lis = this.ul.children;\r\n\r\n\t\tif (this.selected) {\r\n\t\t\tlis[this.index].setAttribute(\"aria-selected\", \"false\");\r\n\t\t}\r\n\r\n\t\tthis.index = i;\r\n\r\n\t\tif (i > -1 && lis.length > 0) {\r\n\t\t\tlis[i].setAttribute(\"aria-selected\", \"true\");\r\n\t\t\tthis.status.textContent = lis[i].textContent;\r\n\r\n\t\t\t// scroll to highlighted element in case parent's height is fixed\r\n\t\t\tthis.ul.scrollTop = lis[i].offsetTop - this.ul.clientHeight + lis[i].clientHeight;\r\n\r\n\t\t\t$.fire(this.input, \"awesomplete-highlight\", {\r\n\t\t\t\ttext: this.suggestions[this.index]\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tselect: function (selected, origin) {\r\n\t\tif (selected) {\r\n\t\t\tthis.index = $.siblingIndex(selected);\r\n\t\t} else {\r\n\t\t\tselected = this.ul.children[this.index];\r\n\t\t}\r\n\r\n\t\tif (selected) {\r\n\t\t\tvar suggestion = this.suggestions[this.index];\r\n\r\n\t\t\tvar allowed = $.fire(this.input, \"awesomplete-select\", {\r\n\t\t\t\ttext: suggestion,\r\n\t\t\t\torigin: origin || selected\r\n\t\t\t});\r\n\r\n\t\t\tif (allowed) {\r\n\t\t\t\tthis.replace(suggestion);\r\n\t\t\t\tthis.close({ reason: \"select\" });\r\n\t\t\t\t$.fire(this.input, \"awesomplete-selectcomplete\", {\r\n\t\t\t\t\ttext: suggestion\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tevaluate: function() {\r\n\t\tvar me = this;\r\n\t\tvar value = this.input.value;\r\n\r\n\t\tif (value.length >= this.minChars && this._list.length > 0) {\r\n\t\t\t/* Check if we still have to delay the evaluate function. If we do, delay it by filterDelay (but we will still\r\n\t\t\tuse the latest value). We treat this function the same as an input triggered select. So if another\r\n\t\t\tselect triggers before the delay is over we might delay it again.*/\r\n\t\t\tvar time = new Date().getTime();\r\n\r\n\t\t\tif (time - this.lastFilterTime < this.filterDelay) {\r\n\t\t\t\tif (!this.filterDelayed) {\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\treturn this.evaluate();\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\tthis.filterDelay);\r\n\t\t\t\t\tthis.filterDelayed = true;\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.lastFilterTime = time;\r\n\t\t\tthis.filterDelayed = false;\r\n\r\n\r\n\t\t\tthis.index = -1;\r\n\t\t\t// Populate list with options that match\r\n\t\t\tthis.ul.innerHTML = \"\";\r\n\r\n\t\t\tthis.suggestions = this._list\r\n\t\t\t\t.map(function(item) {\r\n\t\t\t\t\treturn new Suggestion(me.data(item, value));\r\n\t\t\t\t})\r\n\t\t\t\t.filter(function(item) {\r\n\t\t\t\t\treturn me.filter(item, value);\r\n\t\t\t\t})\r\n\t\t\t\t.sort(this.sort)\r\n\t\t\t\t.slice(0, this.maxItems);\r\n\r\n\t\t\tthis.suggestions.forEach(function(text) {\r\n\t\t\t\t\tme.ul.appendChild(me.item(text, value));\r\n\t\t\t\t});\r\n\r\n\t\t\tif (this.ul.children.length === 0) {\r\n\t\t\t\tthis.close({ reason: \"nomatches\" });\r\n\t\t\t} else {\r\n\t\t\t\tthis.open();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.close({ reason: \"nomatches\" });\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Static methods/properties\r\n\r\n_.all = [];\r\n\r\n_.FILTER_CONTAINS = function (text, input) {\r\n\treturn RegExp($.regExpEscape(input.trim()), \"i\").test(text);\r\n};\r\n\r\n_.FILTER_STARTSWITH = function (text, input) {\r\n\treturn RegExp(\"^\" + $.regExpEscape(input.trim()), \"i\").test(text);\r\n};\r\n\r\n_.SORT_BYLENGTH = function (a, b) {\r\n\tif (a.length !== b.length) {\r\n\t\treturn a.length - b.length;\r\n\t}\r\n\r\n\treturn a < b? -1 : 1;\r\n};\r\n\r\n_.ITEM = function (text, input) {\r\n\tvar html = input.trim() === '' ? text : text.replace(RegExp($.regExpEscape(input.trim()), \"gi\"), \"<mark>$&</mark>\");\r\n\treturn $.create(\"li\", {\r\n\t\tinnerHTML: html,\r\n\t\t\"aria-selected\": \"false\"\r\n\t});\r\n};\r\n\r\n_.REPLACE = function (text) {\r\n\tthis.input.value = text.value;\r\n};\r\n\r\n_.DATA = function (item/*, input*/) { return item; };\r\n\r\n// Private functions\r\n\r\nfunction Suggestion(data) {\r\n\tvar o = Array.isArray(data)\r\n\t  ? { label: data[0], value: data[1] }\r\n\t  : typeof data === \"object\" && \"label\" in data && \"value\" in data ? data : { label: data, value: data };\r\n\r\n\tthis.label = o.label || o.value;\r\n\tthis.value = o.value;\r\n}\r\nObject.defineProperty(Suggestion.prototype = Object.create(String.prototype), \"length\", {\r\n\tget: function() { return this.label.length; }\r\n});\r\nSuggestion.prototype.toString = Suggestion.prototype.valueOf = function () {\r\n\treturn \"\" + this.label;\r\n};\r\n\r\nfunction configure(instance, properties, o) {\r\n\tfor (var i in properties) {\r\n\t\tvar initial = properties[i],\r\n\t\t    attrValue = instance.input.getAttribute(\"data-\" + i.toLowerCase());\r\n\r\n\t\tif (typeof initial === \"number\") {\r\n\t\t\tinstance[i] = parseInt(attrValue);\r\n\t\t}\r\n\t\telse if (initial === false) { // Boolean options must be false by default anyway\r\n\t\t\tinstance[i] = attrValue !== null;\r\n\t\t}\r\n\t\telse if (initial instanceof Function) {\r\n\t\t\tinstance[i] = null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinstance[i] = attrValue;\r\n\t\t}\r\n\r\n\t\tif (!instance[i] && instance[i] !== 0) {\r\n\t\t\tinstance[i] = (i in o)? o[i] : initial;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Helpers\r\n\r\nvar slice = Array.prototype.slice;\r\n\r\nfunction $(expr, con) {\r\n\treturn typeof expr === \"string\"? (con || document).querySelector(expr) : expr || null;\r\n}\r\n\r\nfunction $$(expr, con) {\r\n\treturn slice.call((con || document).querySelectorAll(expr));\r\n}\r\n\r\n$.create = function(tag, o) {\r\n\tvar element = document.createElement(tag);\r\n\r\n\tfor (var i in o) {\r\n\t\tvar val = o[i];\r\n\r\n\t\tif (i === \"inside\") {\r\n\t\t\t$(val).appendChild(element);\r\n\t\t}\r\n\t\telse if (i === \"around\") {\r\n\t\t\tvar ref = $(val);\r\n\t\t\tref.parentNode.insertBefore(element, ref);\r\n\t\t\telement.appendChild(ref);\r\n\t\t}\r\n\t\telse if (i in element) {\r\n\t\t\telement[i] = val;\r\n\t\t}\r\n\t\telse {\r\n\t\t\telement.setAttribute(i, val);\r\n\t\t}\r\n\t}\r\n\r\n\treturn element;\r\n};\r\n\r\n$.bind = function(element, o) {\r\n\tif (element) {\r\n\t\tfor (var event in o) {\r\n\t\t\tvar callback = o[event];\r\n\r\n\t\t\tevent.split(/\\s+/).forEach(function (event) {\r\n\t\t\t\telement.addEventListener(event, callback);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n\r\n$.fire = function(target, type, properties) {\r\n\tvar evt = document.createEvent(\"HTMLEvents\");\r\n\r\n\tevt.initEvent(type, true, true );\r\n\r\n\tfor (var j in properties) {\r\n\t\tevt[j] = properties[j];\r\n\t}\r\n\r\n\treturn target.dispatchEvent(evt);\r\n};\r\n\r\n$.regExpEscape = function (s) {\r\n\treturn s.replace(/[-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\r\n};\r\n\r\n$.siblingIndex = function (el) {\r\n\t/* eslint-disable no-cond-assign */\r\n\tfor (var i = 0; el = el.previousElementSibling; i++);\r\n\treturn i;\r\n};\r\n\r\n// Initialization\r\n\r\nfunction init() {\r\n\t$$(\"input.awesomplete\").forEach(function (input) {\r\n\t\tnew _(input);\r\n\t});\r\n}\r\n\r\n// Are we in a browser? Check for Document constructor\r\nif (typeof Document !== \"undefined\") {\r\n\t// DOM already loaded?\r\n\tif (document.readyState !== \"loading\") {\r\n\t\tinit();\r\n\t}\r\n\telse {\r\n\t\t// Wait for it\r\n\t\tdocument.addEventListener(\"DOMContentLoaded\", init);\r\n\t}\r\n}\r\n\r\n_.$ = $;\r\n_.$$ = $$;\r\n\r\n// Make sure to export Awesomplete on self when in a browser\r\nif (typeof self !== \"undefined\") {\r\n\tself.Awesomplete = _;\r\n}\r\n\r\n// Expose Awesomplete as a CJS module\r\nif (typeof module === \"object\" && module.exports) {\r\n\tmodule.exports = _;\r\n}\r\n\r\nreturn _;\r\n\r\n}());\r\n"]}